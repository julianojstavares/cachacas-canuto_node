generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Clients {

  id             String   @id @default(uuid())
  nome           String
  dataNascimento DateTime

  compras Sales[]

  @@map("clients")
}

model Products {

  id            String  @id @default(uuid())
  marca         String
  classificacao String
  nome          String
  teorAlcoolico Int
  regiao        String
  precoAtual    Decimal @db.Decimal(10, 2)

  itensVendidos ItemsSold[]

  @@map("products")
}

model Sales {

  id        String   @id @default(uuid())
  data      DateTime
  idCliente String

  itensVendidos ItemsSold[]

  clientRelation Clients? @relation(fields: [idCliente], references: [id], onDelete: Cascade)

  @@map("sales")
}

model ItemsSold {

  id         String @id @default(uuid())
  quantidade Int

  idVenda   String
  idProduto String

  saleRelation    Sales?    @relation(fields: [idVenda], references: [id], onDelete: Cascade)
  productRelation Products? @relation(fields: [idProduto], references: [id], onDelete: Cascade)

  @@map("items_sales")
}
